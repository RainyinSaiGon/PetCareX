<div class="container">
  <div class="breadcrumb">
    <span class="link" (click)="router.navigate(['/customers'])">Khách Hàng</span>
    <span class="separator">/</span>
    <span class="link" (click)="router.navigate(['/customers', customerId, 'pets'])">
      {{ customerName || 'Thú Cưng' }}
    </span>
    <span class="separator">/</span>
    <span>{{ isEditMode ? 'Chỉnh Sửa' : 'Thêm Mới' }}</span>
  </div>

  <div class="header">
    <h1>{{ isEditMode ? 'Chỉnh Sửa Thú Cưng' : 'Thêm Thú Cưng Mới' }}</h1>
  </div>

  <div *ngIf="error" class="alert alert-error">
    {{ error }}
  </div>

  <div *ngIf="success" class="alert alert-success">
    {{ success }}
  </div>

  <form [formGroup]="petForm" (ngSubmit)="onSubmit()" class="pet-form">
    <div class="form-row">
      <div class="form-group">
        <label for="TenThuCung" class="required">Tên Thú Cưng</label>
        <input
          type="text"
          id="TenThuCung"
          formControlName="TenThuCung"
          [class.invalid]="isFieldInvalid('TenThuCung')"
          placeholder="Nhập tên thú cưng"
        />
        <span class="error-message" *ngIf="isFieldInvalid('TenThuCung')">
          {{ getErrorMessage('TenThuCung') }}
        </span>
      </div>

      <div class="form-group">
        <label for="MaChungLoai" class="required">Chủng Loại</label>
        <select
          id="MaChungLoai"
          formControlName="MaChungLoai"
          [class.invalid]="isFieldInvalid('MaChungLoai')"
        >
          <option value="">-- Chọn chủng loại --</option>
          <option *ngFor="let sp of species" [value]="sp.MaChungLoaiThuCung">
            {{ sp.TenChungLoaiThuCung }}
          </option>
        </select>
        <span class="error-message" *ngIf="isFieldInvalid('MaChungLoai')">
          {{ getErrorMessage('MaChungLoai') }}
        </span>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="NgaySinhThuCung">Ngày Sinh</label>
        <input
          type="date"
          id="NgaySinhThuCung"
          formControlName="NgaySinhThuCung"
          [class.invalid]="isFieldInvalid('NgaySinhThuCung')"
        />
        <span class="error-message" *ngIf="isFieldInvalid('NgaySinhThuCung')">
          {{ getErrorMessage('NgaySinhThuCung') }}
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="loading">
        Hủy
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading">
        {{ loading ? 'Đang xử lý...' : (isEditMode ? 'Cập Nhật' : 'Thêm Mới') }}
      </button>
    </div>
  </form>
</div>
